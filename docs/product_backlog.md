# プロダクトバックログ: じろりみ

## 開発フェーズ概要

| フェーズ | 目標 | ステータス |
|---------|------|-----------|
| **Phase 1** | 大会のエントリーができる | 🟡 In Progress |
| **Phase 2** | 予選を進行できる | ⚪ Backlog |
| **Phase 3** | グランドファイナルを進行できる | ⚪ Backlog |

### ステータス凡例

| ステータス | 説明 |
|-----------|------|
| ⚪ Backlog | 未着手（将来のフェーズ） |
| 🔵 Not Started | 未着手（現フェーズ） |
| 🟡 In Progress | 進行中 |
| 🟢 Done | 完了 |
| 🔴 Blocked | ブロック中 |

---

## Phase 1: 大会のエントリーができる

### Epic 1.1: プロジェクト基盤構築

| ID | バックログアイテム | 説明 | 受け入れ条件 | ステータス |
|----|-------------------|------|-------------|-----------|
| 1.1.1 | Supabaseプロジェクト初期設定 | Supabase プロジェクトを作成し、Auth/Database/Storage/Edge Functionsを有効化 | ダッシュボードでプロジェクトが作成されている | 🟢 Done |
| 1.1.2 | フロントエンド環境構築 | Next.js (App Router) + TypeScript でプロジェクトを初期化 | `next@16.1.1` と `typescript@5.9.3` を使用し、`packageManager` は `pnpm@10.28.0`、Node は `>=20.9.0`、`pnpm dev` でローカル起動できる | 🟢 Done |
| 1.1.3 | バックエンド環境構築 | Supabase CLI によるローカル開発環境を構築 | ローカルでSupabaseが動作する | 🔵 Not Started |
| 1.1.4 | データベース設計 (Schema) | ユーザー/大会/予選/エントリーのテーブル定義 (SQL) | DDLまたはER図が存在する | 🔵 Not Started |
| 1.1.5 | Row Level Security (RLS) | 認証・権限に基づくアクセス制御ポリシーを実装 | 未認証ユーザーは書き込み不可 | 🔵 Not Started |

---

### Epic 1.2: ユーザー認証（REQ-001）

| ID | バックログアイテム | 説明 | 受け入れ条件 | ステータス |
|----|-------------------|------|-------------|-----------|
| 1.2.1 | Discord OAuth 設定 | Supabase Auth に Discord プロバイダーを設定 | Discord Developer Portal と連携完了 | 🔵 Not Started |
| 1.2.2 | ログイン画面 | Discord アカウントでログインできる UI を実装 | ログインボタン押下で Discord 認証フローが開始される | 🔵 Not Started |
| 1.2.3 | 認証状態管理 | ログイン状態をグローバルに管理する仕組みを実装 | ページリロード後もログイン状態が維持される | 🔵 Not Started |
| 1.2.4 | ログアウト機能 | ログアウトボタンでセッションを終了 | ログアウト後、未認証状態に戻る | 🔵 Not Started |
| 1.2.5 | ユーザー情報の自動保存 | 初回ログイン時に Discord ID を `users` テーブルに保存 | ログイン後、users テーブルにレコードが作成される | 🔵 Not Started |

---

### Epic 1.3: プロフィール設定（REQ-002）

| ID | バックログアイテム | 説明 | 受け入れ条件 | ステータス |
|----|-------------------|------|-------------|-----------|
| 1.3.1 | マイページ画面（基本） | プロフィール情報を表示・編集できる画面を作成 | マイページにアクセスできる | 🔵 Not Started |
| 1.3.2 | プレイヤー名設定 | ゲーム内プレイヤー名を入力・保存できる | 入力した名前が DB に保存される | 🔵 Not Started |
| 1.3.3 | X ID 設定 | X ID（必須）を入力・保存できる | バリデーション付きで保存される | 🔵 Not Started |
| 1.3.4 | 性別設定 | ボーイズ / ガールズ を選択できる | 選択した性別が保存される | 🔵 Not Started |
| 1.3.5 | ロール優先順位設定 | 5種のロールから3つを選び優先順位付け | 第1〜第3希望が保存される | 🔵 Not Started |
| 1.3.6 | Discord ID 表示（編集不可） | 認証から取得した Discord ID を表示 | 自動取得され編集不可で表示される | 🔵 Not Started |
| 1.3.7 | プロフィール完了判定 | 必須項目が未入力の場合、設定画面に誘導 | 未完了状態では大会一覧にアクセス時に誘導される | 🔵 Not Started |

---

### Epic 1.4: 大会作成・管理（REQ-003）

| ID | バックログアイテム | 説明 | 受け入れ条件 | ステータス |
|----|-------------------|------|-------------|-----------|
| 1.4.1 | 運営者権限の付与機能 | 特定ユーザーに運営者権限を付与する仕組み | DB で運営者フラグを管理できる | 🔵 Not Started |
| 1.4.2 | 大会作成画面 | 運営者が新規大会を作成できる | 大会名・性別区分を入力して作成できる | 🔵 Not Started |
| 1.4.3 | 予選日程設定 | 予選の回数と各予選の日程を設定 | 複数の予選を追加・削除できる | 🔵 Not Started |
| 1.4.4 | エントリー期限設定 | 各予選のエントリー期限を設定 | 日時を指定して保存できる | 🔵 Not Started |
| 1.4.5 | チェックイン時間帯設定 | 各予選のチェックイン開始〜締切を設定 | 時間帯が保存される | 🔵 Not Started |
| 1.4.6 | 試合数・GF進出人数設定 | 1予選あたりの試合数、GF進出人数を設定 | デフォルト値あり、変更可能 | 🔵 Not Started |
| 1.4.7 | 大会編集機能 | 作成済み大会の情報を修正できる | 保存した内容が反映される | 🔵 Not Started |
| 1.4.8 | 大会一覧画面（運営者向け） | 運営者が管理する大会の一覧を表示 | 大会ごとに編集・詳細へ遷移できる | 🔵 Not Started |

---

### Epic 1.5: 大会エントリー（REQ-004）

| ID | バックログアイテム | 説明 | 受け入れ条件 | ステータス |
|----|-------------------|------|-------------|-----------|
| 1.5.1 | 大会一覧画面（参加者向け） | 参加可能な大会の一覧を表示 | 性別に合った大会のみ表示される | 🔵 Not Started |
| 1.5.2 | 大会詳細画面 | 大会の情報と予選一覧を表示 | 各予選の日程・エントリー期限が確認できる | 🔵 Not Started |
| 1.5.3 | エントリー機能 | 各予選に個別でエントリーできる | エントリーボタンでエントリー完了 | 🔵 Not Started |
| 1.5.4 | エントリー期限チェック | 期限を過ぎた予選にはエントリー不可 | 期限後はボタンが非活性になる | 🔵 Not Started |
| 1.5.5 | プロフィール未完了チェック | プロフィール未完了ならエントリー不可 | エラーメッセージでマイページに誘導 | 🔵 Not Started |
| 1.5.6 | 性別チェック | プロフィールの性別と大会の性別区分を照合 | 不一致の場合はエントリー不可 | 🔵 Not Started |
| 1.5.7 | エントリーキャンセル機能 | エントリー済みの予選をキャンセルできる | キャンセル後、再エントリー可能 | 🔵 Not Started |
| 1.5.8 | マイエントリー一覧 | 自分がエントリーした予選の一覧を表示 | マイページから確認できる | 🔵 Not Started |

---

### Epic 1.6: エントリー一覧・公開（REQ-005）

| ID | バックログアイテム | 説明 | 受け入れ条件 | ステータス |
|----|-------------------|------|-------------|-----------|
| 1.6.1 | エントリー一覧画面 | 予選ごとのエントリー者一覧を表示 | プレイヤー名・ロールが表示される | 🔵 Not Started |
| 1.6.2 | 未ログインでの閲覧許可 | 認証なしでもエントリー一覧を閲覧可能 | 未ログイン状態でアクセスできる | 🔵 Not Started |
| 1.6.3 | エントリー人数表示 | 現在のエントリー人数を表示 | リアルタイムで更新される | 🔵 Not Started |
| 1.6.4 | ロール分布表示 | 各ロールのエントリー人数を集計表示 | 円グラフ or 棒グラフで可視化 | 🔵 Not Started |

---

## Phase 1 完了条件

- [ ] Discord 認証でログインできる
- [ ] プロフィール（プレイヤー名、Discord ID、性別、ロール優先順位）を設定できる
- [ ] 運営者が大会・予選を作成できる
- [ ] 参加者が予選にエントリー/キャンセルできる
- [ ] 誰でもエントリー一覧・ロール分布を閲覧できる

---

## Phase 2: 予選を進行できる（Backlog）

> 詳細は Phase 1 完了後に定義

- REQ-006: チェックイン
- REQ-007: チーム分け（スイスドロー形式）
- REQ-008: 試合進行
- REQ-008-A: 運営者 試合進行管理画面
- REQ-009: 成績・ランキング

---

## Phase 3: グランドファイナルを進行できる（Backlog）

> 詳細は Phase 2 完了後に定義

- REQ-010: グランドファイナル
- REQ-011: マイページ - 過去大会成績

---

## 進捗サマリー

| Epic | 総数 | Done | In Progress | Not Started |
|------|------|------|-------------|-------------|
| 1.1 プロジェクト基盤構築 | 5 | 2 | 0 | 3 |
| 1.2 ユーザー認証 | 5 | 0 | 0 | 5 |
| 1.3 プロフィール設定 | 7 | 0 | 0 | 7 |
| 1.4 大会作成・管理 | 8 | 0 | 0 | 8 |
| 1.5 大会エントリー | 8 | 0 | 0 | 8 |
| 1.6 エントリー一覧・公開 | 4 | 0 | 0 | 4 |
| **Phase 1 合計** | **37** | **2** | **0** | **35** |
